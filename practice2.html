<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JavaScript Practice 2</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
<script>

// ================= Calculator =================
function CalCulator() {
  let totalsum = 0;
  return {
    sum(num) {
      totalsum += num;
      return this;
    },
    total() {
      return totalsum;
    }
  };
}
// Example: console.log(CalCulator().sum(1).sum(3).total()); // 4


// ================= Counter =================
function counter() {
  let count = 0;
  return {
    increment() {
      count++;
      return this;
    },
    decrement() {
      count--;
      return this;
    },
    value() {
      return count;
    }
  };
}
// Example: console.log(new counter().increment().increment().decrement().value()); // 1


// ================= String Builder =================
function StringBuilder() {
  let result = "";
  return {
    add(string) {
      result += string;
      return this;
    },
    toString() {
      return result;
    }
  };
}
// Example: console.log(StringBuilder().add("Hello").add(" ").add("World").toString());


// ================= Number Operations =================
function NumberOps(first_number) {
  let first_result = 0;
  let final_result = 0;
  return {
    multiply(second_number) {
      first_result = first_number * second_number;
      return this;
    },
    add(third_number) {
      final_result = first_result + third_number;
      return final_result;
    }
  };
}
// Example: console.log(NumberOps(5).multiply(2).add(3)); // 13


// ================= Delay / Logger =================
class Delay {
  constructor() {
    this.promise = Promise.resolve();
  }
  wait(ms) {
    this.promise = this.promise.then(() => 
      new Promise(resolve => setTimeout(resolve, ms))
    );
    return this;
  }
  log(message) {
    this.promise = this.promise.then(() => console.log(message));
    return this;
  }
}
// Example: new Delay().wait(1000).log("First").wait(500).log("Second");


class Logger {
  constructor() {
    this.promise = Promise.resolve();
  }
  logAfter(ms, message) {
    this.promise = this.promise.then(
      () => new Promise(resolve => {
        setTimeout(() => {
          console.log(message);
          resolve();
        }, ms);
      })
    );
    return this;
  }
}


// ================= Reverse a String =================
function reverseString(str) {
  let result = [];
  for (let i = str.length - 1; i >= 0; i--) {
    result.push(str[i]);
  }
  return result.join("");
}
// Example: console.log(reverseString("ashishrana"));


// ================= Palindrome Check =================
function isPalindrome(str) {
  let left = 0, right = str.length - 1;
  while (left < right) {
    if (str[left] !== str[right]) return false;
    left++;
    right--;
  }
  return true;
}
// Example: console.log(isPalindrome("racecar")); // true


// ================= Count Vowels =================
function countVowels(str) {
  const vowels = ['a','e','i','o','u'];
  let count = 0;
  for (let ch of str) {
    if (vowels.includes(ch)) count++;
  }
  return count;
}
// Example: console.log(countVowels("advedsihgou")); // 5


// ================= Find Min & Max without Math.max/min =================
function findMinMax(arr) {
  for (let i = 0; i < arr.length - 1; i++) {
    for (let j = 0; j < arr.length - i - 1; j++) {
      if (arr[j] > arr[j + 1]) {
        let temp = arr[j];
        arr[j] = arr[j + 1];
        arr[j + 1] = temp;
      }
    }
  }
  return { min: arr[0], max: arr[arr.length - 1] };
}
// Example: console.log(findMinMax([1,3,4,7,5,88,9])); // {min:1, max:88}


// ================= Remove Duplicates =================
function removeDuplicates(arr) {
  let unique = [];
  for (let val of arr) {
    if (!unique.includes(val)) unique.push(val);
  }
  return unique;
}
// Example: console.log(removeDuplicates([2,3,4,4,7,8,9,8,2]));


// ================= Flatten Array =================
function deepFlatten(arr) {
  let result = [];
  for (let item of arr) {
    if (Array.isArray(item)) {
      result = result.concat(deepFlatten(item));
    } else {
      result.push(item);
    }
  }
  return result;
}
// Example: console.log(deepFlatten([1, [2, [3, 4], 5]]));


// ================= Chunk Array =================
function chunkArray(arr, k) {
  let chunks = [];
  for (let i = 0; i < arr.length; i += k) {
    chunks.push(arr.slice(i, i + k));
  }
  return chunks;
}
// Example: console.log(chunkArray([2,3,4,5,6,7,8,9], 2));

</script>
</body>
</html>
